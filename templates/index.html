<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Speech Enhancement System - AI-Powered Noise Reduction</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <i class="fas fa-microphone-alt"></i>
                <h1>Speech Enhancement System</h1>
            </div>
            <p class="subtitle">AI-Powered Noise Reduction & Speech Enhancement</p>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Upload Section -->
            <div class="upload-section" id="uploadSection">
                <div class="upload-box">
                    <i class="fas fa-cloud-upload-alt upload-icon"></i>
                    <h2>Upload Your Audio File</h2>
                    <p class="upload-description">Upload an audio file containing noise, and our AI will clean it for you!</p>
                    
                    <form id="uploadForm" enctype="multipart/form-data">
                        <input type="file" id="audioFile" name="audio_file" accept=".wav,.mp3,.ogg,.flac" required hidden>
                        <label for="audioFile" class="file-input-label">
                            <i class="fas fa-file-audio"></i>
                            <span id="fileName">Choose Audio File</span>
                        </label>
                        <p class="file-info">Supported formats: WAV, MP3, OGG, FLAC (Max 50MB)</p>
                        
                        <div style="margin: 20px 0; text-align: left;">
                            <label for="enhancementLevel" style="display: block; margin-bottom: 8px; font-weight: 600;">Enhancement Level:</label>
                            <select id="enhancementLevel" name="enhancement_level" style="width: 100%; padding: 10px; border: 2px solid #667eea; border-radius: 8px; font-size: 14px;">
                                <option value="light">Light (Subtle noise reduction)</option>
                                <option value="medium">Medium (Balanced)</option>
                                <option value="high">High (Aggressive - Recommended)</option>
                                <option value="maximum">Maximum (Most aggressive)</option>
                                <option value="extreme" selected>ðŸ”¥ EXTREME (100% Clean - Perfect Silence)</option>
                            </select>
                        </div>
                        
                        <button type="submit" class="btn-primary" id="processBtn" disabled>
                            <i class="fas fa-magic"></i>
                            Enhance Audio
                        </button>
                    </form>
                </div>

                <!-- Features -->
                <div class="features">
                    <div class="feature-card">
                        <i class="fas fa-brain"></i>
                        <h3>AI Classification</h3>
                        <p>Automatically detects noise type using deep learning</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-wave-square"></i>
                        <h3>Noise Removal</h3>
                        <p>Removes environmental noise while preserving speech</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-chart-line"></i>
                        <h3>Quality Metrics</h3>
                        <p>Provides SNR improvement and visual spectrograms</p>
                    </div>
                </div>
            </div>

            <!-- Processing Section -->
            <div class="processing-section hidden" id="processingSection">
                <div class="loader">
                    <div class="spinner"></div>
                    <p>Processing your audio...</p>
                    <p class="processing-detail">Analyzing noise patterns and enhancing speech quality</p>
                </div>
            </div>

            <!-- Results Section -->
            <div class="results-section hidden" id="resultsSection">
                <h2>
                    <i class="fas fa-check-circle"></i>
                    Processing Complete!
                </h2>

                <!-- Audio Players -->
                <div class="audio-comparison">
                    <div class="audio-player-card">
                        <h3><i class="fas fa-volume-up"></i> Original Audio (With Noise)</h3>
                        <audio id="originalAudio" controls></audio>
                        <p class="audio-info" id="originalInfo">Loading...</p>
                    </div>
                    <div class="audio-player-card enhanced">
                        <h3><i class="fas fa-star"></i> Enhanced Audio (Noise Removed)</h3>
                        <audio id="enhancedAudio" controls></audio>
                        <p class="audio-info" id="enhancedInfo">Loading...</p>
                    </div>
                </div>

                <!-- Metrics -->
                <div class="metrics">
                    <div class="metric-card">
                        <i class="fas fa-tags"></i>
                        <h4>Noise Category</h4>
                        <p class="metric-value" id="noiseCategory">-</p>
                    </div>
                    <div class="metric-card">
                        <i class="fas fa-percentage"></i>
                        <h4>Confidence</h4>
                        <p class="metric-value" id="confidence">-</p>
                    </div>
                    <div class="metric-card">
                        <i class="fas fa-signal"></i>
                        <h4>SNR Improvement</h4>
                        <p class="metric-value" id="snrImprovement">-</p>
                    </div>
                    <div class="metric-card">
                        <i class="fas fa-clock"></i>
                        <h4>Duration</h4>
                        <p class="metric-value" id="duration">-</p>
                    </div>
                </div>

                <!-- Spectrogram -->
                <div class="spectrogram-container">
                    <h3><i class="fas fa-chart-area"></i> Visual Comparison - Spectrograms</h3>
                    <p class="spectrogram-description">Compare the frequency content before and after noise reduction</p>
                    <img id="spectrogramImage" src="" alt="Spectrogram Comparison">
                </div>

                <!-- Actions -->
                <div class="action-buttons">
                    <a id="downloadBtn" class="btn-download" download>
                        <i class="fas fa-download"></i>
                        Download Enhanced Audio
                    </a>
                    <button class="btn-secondary" onclick="resetUpload()">
                        <i class="fas fa-redo"></i>
                        Process Another File
                    </button>
                </div>
            </div>

            <!-- Error Section -->
            <div class="error-section hidden" id="errorSection">
                <i class="fas fa-exclamation-triangle"></i>
                <h3>Processing Error</h3>
                <p id="errorMessage">An error occurred while processing your audio.</p>
                <button class="btn-secondary" onclick="resetUpload()">
                    <i class="fas fa-arrow-left"></i>
                    Try Again
                </button>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <p>&copy; 2026 Speech Enhancement System | Powered by Deep Learning</p>
                <div class="tech-stack">
                    <span><i class="fab fa-python"></i> Python</span>
                    <span><i class="fas fa-brain"></i> TensorFlow</span>
                    <span><i class="fas fa-flask"></i> Flask</span>
                </div>
            </div>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
